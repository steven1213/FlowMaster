# FlowMaster Designer å·¥ä½œæµè®¾è®¡å™¨

FlowMaster Designeræ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯è§†åŒ–å·¥ä½œæµè®¾è®¡å™¨ï¼ŒåŸºäºReact + TypeScript + AntV G6æ„å»ºï¼Œæ”¯æŒæ‹–æ‹½å¼è®¾è®¡ã€å®æ—¶é¢„è§ˆå’ŒBPMNæ ‡å‡†ã€‚

## æŠ€æœ¯æ ˆ

- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript 5** - ç±»å‹å®‰å…¨çš„JavaScript
- **Vite 5** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Ant Design 5** - UIç»„ä»¶åº“
- **AntV G6** - å›¾å¯è§†åŒ–å¼•æ“
- **AntV X6** - å›¾ç¼–è¾‘å¼•æ“
- **Redux Toolkit** - çŠ¶æ€ç®¡ç†
- **Monaco Editor** - ä»£ç ç¼–è¾‘å™¨
- **React DnD** - æ‹–æ‹½åŠŸèƒ½

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
- **å¯è§†åŒ–è®¾è®¡** - æ‹–æ‹½å¼å·¥ä½œæµè®¾è®¡
- **èŠ‚ç‚¹ç®¡ç†** - æ”¯æŒå¤šç§BPMNèŠ‚ç‚¹ç±»å‹
- **è¿çº¿ç®¡ç†** - æ™ºèƒ½è¿çº¿å’Œå»ºè®®
- **å±æ€§é…ç½®** - å®æ—¶å±æ€§ç¼–è¾‘
- **æ’¤é”€é‡åš** - å®Œæ•´çš„å†å²è®°å½•ç®¡ç†
- **ç¼©æ”¾å¹³ç§»** - çµæ´»çš„è§†å›¾æ“ä½œ
- **å°åœ°å›¾** - å¿«é€Ÿå¯¼èˆªå’Œå®šä½
- **ç½‘æ ¼å¯¹é½** - ç²¾ç¡®çš„èŠ‚ç‚¹å®šä½

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½
- **å·¥ä½œæµé¢„è§ˆ** - å®æ—¶é¢„è§ˆå’Œæ¨¡æ‹Ÿ
- **æ¨¡æ¿åº“** - é¢„è®¾å·¥ä½œæµæ¨¡æ¿
- **ç»„ä»¶åº“** - è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶
- **å¯¼å…¥å¯¼å‡º** - BPMNæ ¼å¼æ”¯æŒ
- **åä½œç¼–è¾‘** - å¤šäººå®æ—¶åä½œ

## é¡¹ç›®ç»“æ„

```
flowmaster-designer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DesignerLayout.tsx
â”‚   â”‚   â””â”€â”€ LoadingSpinner.tsx
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DesignerPage.tsx
â”‚   â”‚   â”œâ”€â”€ TemplatePage.tsx
â”‚   â”‚   â””â”€â”€ LibraryPage.tsx
â”‚   â”œâ”€â”€ designer/         # è®¾è®¡å™¨æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ FlowCanvas.tsx
â”‚   â”‚       â”œâ”€â”€ NodePalette.tsx
â”‚   â”‚       â”œâ”€â”€ PropertyPanel.tsx
â”‚   â”‚       â””â”€â”€ Minimap.tsx
â”‚   â”œâ”€â”€ store/           # ReduxçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ slices/
â”‚   â”œâ”€â”€ types/           # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ styles/          # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”œâ”€â”€ App.tsx          # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx         # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## æ”¯æŒçš„èŠ‚ç‚¹ç±»å‹

### åŸºç¡€èŠ‚ç‚¹
- **å¼€å§‹èŠ‚ç‚¹** - å·¥ä½œæµèµ·å§‹ç‚¹
- **ç»“æŸèŠ‚ç‚¹** - å·¥ä½œæµç»ˆæ­¢ç‚¹

### ä»»åŠ¡èŠ‚ç‚¹
- **ç”¨æˆ·ä»»åŠ¡** - éœ€è¦äººå·¥å¤„ç†çš„ä»»åŠ¡
- **æœåŠ¡ä»»åŠ¡** - è‡ªåŠ¨æ‰§è¡Œçš„æœåŠ¡è°ƒç”¨
- **è„šæœ¬ä»»åŠ¡** - æ‰§è¡Œè„šæœ¬ä»£ç 

### ç½‘å…³èŠ‚ç‚¹
- **æ’ä»–ç½‘å…³** - æ¡ä»¶åˆ†æ”¯
- **å¹¶è¡Œç½‘å…³** - å¹¶è¡Œæ‰§è¡Œ
- **åŒ…å®¹ç½‘å…³** - å¤šæ¡ä»¶åˆ†æ”¯

### äº‹ä»¶èŠ‚ç‚¹
- **å®šæ—¶äº‹ä»¶** - æ—¶é—´è§¦å‘
- **æ¶ˆæ¯äº‹ä»¶** - æ¶ˆæ¯è§¦å‘
- **ä¿¡å·äº‹ä»¶** - ä¿¡å·è§¦å‘

### å…¶ä»–èŠ‚ç‚¹
- **å­æµç¨‹** - åµŒå¥—å·¥ä½œæµ
- **æ³³é“** - ç»„ç»‡æ¶æ„åˆ’åˆ†

## ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 9.0.0

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–
```bash
# åœ¨flowmaster-frontendç›®å½•ä¸‹
npm run install:designer

# æˆ–è€…ç›´æ¥è¿›å…¥designerç›®å½•
cd flowmaster-designer
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 3. è®¿é—®åº”ç”¨
- å¼€å‘ç¯å¢ƒ: http://localhost:3001

## æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

#### 1. æ·»åŠ èŠ‚ç‚¹
- ä»å·¦ä¾§èŠ‚ç‚¹é¢æ¿æ‹–æ‹½èŠ‚ç‚¹åˆ°ç”»å¸ƒ
- æˆ–ç‚¹å‡»èŠ‚ç‚¹é¢æ¿ä¸­çš„èŠ‚ç‚¹æŒ‰é’®

#### 2. è¿æ¥èŠ‚ç‚¹
- é¼ æ ‡æ‚¬åœåœ¨èŠ‚ç‚¹è¾¹ç¼˜æ˜¾ç¤ºè¿æ¥ç‚¹
- æ‹–æ‹½è¿æ¥ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹

#### 3. ç¼–è¾‘å±æ€§
- é€‰æ‹©èŠ‚ç‚¹æˆ–è¿çº¿
- åœ¨å³ä¾§å±æ€§é¢æ¿ç¼–è¾‘å±æ€§

#### 4. è§†å›¾æ“ä½œ
- **ç¼©æ”¾**: é¼ æ ‡æ»šè½®æˆ–å·¥å…·æ æŒ‰é’®
- **å¹³ç§»**: æ‹–æ‹½ç”»å¸ƒç©ºç™½åŒºåŸŸ
- **é‡ç½®**: ç‚¹å‡»é‡ç½®è§†å›¾æŒ‰é’®

#### 5. å†å²æ“ä½œ
- **æ’¤é”€**: Ctrl+Z æˆ–å·¥å…·æ æ’¤é”€æŒ‰é’®
- **é‡åš**: Ctrl+Y æˆ–å·¥å…·æ é‡åšæŒ‰é’®

### é«˜çº§åŠŸèƒ½

#### 1. æ‰¹é‡æ“ä½œ
- æ¡†é€‰å¤šä¸ªèŠ‚ç‚¹
- æ‰¹é‡è®¾ç½®å±æ€§
- æ‰¹é‡åˆ é™¤

#### 2. å¯¹é½å·¥å…·
- ç½‘æ ¼å¯¹é½
- èŠ‚ç‚¹å¯¹é½
- è‡ªåŠ¨å¸ƒå±€

#### 3. å¯¼å…¥å¯¼å‡º
- æ”¯æŒBPMN 2.0æ ¼å¼
- JSONæ ¼å¼å¯¼å…¥å¯¼å‡º
- å›¾ç‰‡å¯¼å‡º

## APIé›†æˆ

### å·¥ä½œæµå®šä¹‰æ ¼å¼
```typescript
interface WorkflowDefinition {
  id: string
  name: string
  description?: string
  version: string
  category: string
  status: WorkflowStatus
  nodes: WorkflowNode[]
  edges: WorkflowEdge[]
  variables: WorkflowVariable[]
  properties: WorkflowProperties
  createdBy: string
  createdAt: string
  updatedAt: string
}
```

### èŠ‚ç‚¹å®šä¹‰æ ¼å¼
```typescript
interface WorkflowNode {
  id: string
  type: NodeType
  name: string
  description?: string
  position: { x: number; y: number }
  size: { width: number; height: number }
  data: NodeData
  style?: NodeStyle
}
```

## å¼€å‘æŒ‡å—

### ä»£ç æ£€æŸ¥
```bash
# ESLintæ£€æŸ¥
npm run lint

# ESLintè‡ªåŠ¨ä¿®å¤
npm run lint:fix

# TypeScriptç±»å‹æ£€æŸ¥
npm run type-check
```

### æµ‹è¯•
```bash
npm test
```

## æ‰©å±•å¼€å‘

### è‡ªå®šä¹‰èŠ‚ç‚¹
1. åœ¨`src/designer/components/`ä¸‹åˆ›å»ºèŠ‚ç‚¹ç»„ä»¶
2. åœ¨`NodePalette.tsx`ä¸­æ³¨å†ŒèŠ‚ç‚¹ç±»å‹
3. åœ¨`PropertyPanel.tsx`ä¸­æ·»åŠ å±æ€§é…ç½®

### è‡ªå®šä¹‰ä¸»é¢˜
1. ä¿®æ”¹`src/styles/index.css`ä¸­çš„CSSå˜é‡
2. æ›´æ–°Ant Designä¸»é¢˜é…ç½®
3. è°ƒæ•´èŠ‚ç‚¹å’Œè¿çº¿çš„é»˜è®¤æ ·å¼

### æ’ä»¶å¼€å‘
1. åˆ›å»ºæ’ä»¶ç›®å½•ç»“æ„
2. å®ç°æ’ä»¶æ¥å£
3. åœ¨åº”ç”¨ä¸­æ³¨å†Œæ’ä»¶

## æ€§èƒ½ä¼˜åŒ–

### æ¸²æŸ“ä¼˜åŒ–
- è™šæ‹ŸåŒ–å¤§å‹å·¥ä½œæµ
- æŒ‰éœ€æ¸²æŸ“èŠ‚ç‚¹
- ä¼˜åŒ–SVGæ€§èƒ½

### å†…å­˜ç®¡ç†
- åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬
- é¿å…å†…å­˜æ³„æ¼
- ä¼˜åŒ–æ•°æ®ç»“æ„

### åŠ è½½ä¼˜åŒ–
- ä»£ç åˆ†å‰²
- æ‡’åŠ è½½ç»„ä»¶
- èµ„æºå‹ç¼©

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹ï¼Ÿ
A: 
1. åœ¨`types/index.ts`ä¸­å®šä¹‰æ–°çš„èŠ‚ç‚¹ç±»å‹
2. åœ¨`NodePalette.tsx`ä¸­æ·»åŠ èŠ‚ç‚¹æŒ‰é’®
3. åœ¨`PropertyPanel.tsx`ä¸­æ·»åŠ å±æ€§é…ç½®
4. åœ¨`FlowCanvas.tsx`ä¸­æ·»åŠ æ¸²æŸ“é€»è¾‘

### Q: å¦‚ä½•è‡ªå®šä¹‰èŠ‚ç‚¹æ ·å¼ï¼Ÿ
A: 
1. ä¿®æ”¹`NodeStyle`æ¥å£å®šä¹‰
2. åœ¨èŠ‚ç‚¹æ¸²æŸ“æ—¶åº”ç”¨æ ·å¼
3. åœ¨å±æ€§é¢æ¿ä¸­æ·»åŠ æ ·å¼é…ç½®

### Q: å¦‚ä½•å®ç°èŠ‚ç‚¹éªŒè¯ï¼Ÿ
A: 
1. åœ¨èŠ‚ç‚¹æ•°æ®ä¸­æ·»åŠ éªŒè¯è§„åˆ™
2. åœ¨ä¿å­˜æ—¶æ‰§è¡ŒéªŒè¯
3. æ˜¾ç¤ºéªŒè¯é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•æ”¯æŒé”®ç›˜å¿«æ·é”®ï¼Ÿ
A: 
1. æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
2. å®ç°å¿«æ·é”®å¤„ç†é€»è¾‘
3. åœ¨UIä¸­æ˜¾ç¤ºå¿«æ·é”®æç¤º

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶
