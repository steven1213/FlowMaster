# FlowMaster åç«¯æœåŠ¡ç®¡ç†è„šæœ¬

æœ¬ç›®å½•åŒ…å«äº†FlowMasteråç«¯æœåŠ¡çš„ä¸€é”®å¯åŠ¨å’Œåœæ­¢è„šæœ¬ï¼Œæ”¯æŒLinux/macOSå’ŒWindowsç³»ç»Ÿã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### Linux/macOS è„šæœ¬
- `start-backend.sh` - ä¸€é”®å¯åŠ¨æ‰€æœ‰åç«¯æœåŠ¡
- `stop-backend.sh` - ä¸€é”®åœæ­¢æ‰€æœ‰åç«¯æœåŠ¡

### Windows è„šæœ¬
- `start-backend.bat` - ä¸€é”®å¯åŠ¨æ‰€æœ‰åç«¯æœåŠ¡
- `stop-backend.bat` - ä¸€é”®åœæ­¢æ‰€æœ‰åç«¯æœåŠ¡

## ğŸš€ æœåŠ¡å¯åŠ¨é¡ºåº

è„šæœ¬ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºå¯åŠ¨æœåŠ¡ï¼ˆè€ƒè™‘ä¾èµ–å…³ç³»ï¼‰ï¼š

1. **Registry Service** (8761) - æœåŠ¡æ³¨å†Œä¸­å¿ƒ
2. **User Service** (8081) - ç”¨æˆ·ç®¡ç†æœåŠ¡
3. **Auth Service** (8082) - è®¤è¯æˆæƒæœåŠ¡
4. **Workflow Service** (8083) - å·¥ä½œæµå¼•æ“æœåŠ¡
5. **Monitoring Service** (8085) - ç›‘æ§æœåŠ¡
6. **Gateway Service** (8080) - APIç½‘å…³æœåŠ¡

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### Linux/macOS

#### å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
# è¿›å…¥è„šæœ¬ç›®å½•
cd /Users/steven/Project/FlowMaster/scripts

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start-backend.sh start

# æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆé»˜è®¤å¯åŠ¨ï¼‰
./start-backend.sh
```

#### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
./stop-backend.sh stop

# æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆé»˜è®¤åœæ­¢ï¼‰
./stop-backend.sh
```

#### å…¶ä»–æ“ä½œ
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
./start-backend.sh restart

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./start-backend.sh status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./start-backend.sh logs <æœåŠ¡å>

# æ¸…ç†æ—¥å¿—
./start-backend.sh clean

# æ˜¾ç¤ºå¸®åŠ©
./start-backend.sh help
```

### Windows

#### å¯åŠ¨æ‰€æœ‰æœåŠ¡
```cmd
REM è¿›å…¥è„šæœ¬ç›®å½•
cd C:\Users\steven\Project\FlowMaster\scripts

REM å¯åŠ¨æ‰€æœ‰æœåŠ¡
start-backend.bat start

REM æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆé»˜è®¤å¯åŠ¨ï¼‰
start-backend.bat
```

#### åœæ­¢æ‰€æœ‰æœåŠ¡
```cmd
REM åœæ­¢æ‰€æœ‰æœåŠ¡
stop-backend.bat stop

REM æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆé»˜è®¤åœæ­¢ï¼‰
stop-backend.bat
```

#### å…¶ä»–æ“ä½œ
```cmd
REM é‡å¯æ‰€æœ‰æœåŠ¡
start-backend.bat restart

REM æŸ¥çœ‹æœåŠ¡çŠ¶æ€
start-backend.bat status

REM å¼ºåˆ¶åœæ­¢æ‰€æœ‰Javaè¿›ç¨‹
stop-backend.bat force

REM æ¸…ç†ç«¯å£å’Œä¸´æ—¶æ–‡ä»¶
stop-backend.bat cleanup

REM æ˜¾ç¤ºå¸®åŠ©
start-backend.bat help
```

## ğŸ”§ è„šæœ¬åŠŸèƒ½ç‰¹æ€§

### å¯åŠ¨è„šæœ¬åŠŸèƒ½
- âœ… **ä¾èµ–æ£€æŸ¥** - è‡ªåŠ¨æ£€æŸ¥Javaå’ŒMavenç¯å¢ƒ
- âœ… **é¡¹ç›®ç¼–è¯‘** - è‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰åç«¯æ¨¡å—
- âœ… **é¡ºåºå¯åŠ¨** - æŒ‰ä¾èµ–å…³ç³»é¡ºåºå¯åŠ¨æœåŠ¡
- âœ… **å¥åº·æ£€æŸ¥** - ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨åå†å¯åŠ¨ä¸‹ä¸€ä¸ª
- âœ… **æ—¥å¿—ç®¡ç†** - è‡ªåŠ¨åˆ›å»ºæ—¥å¿—ç›®å½•å’Œæ–‡ä»¶
- âœ… **è¿›ç¨‹ç®¡ç†** - è®°å½•æœåŠ¡PIDï¼Œä¾¿äºç®¡ç†
- âœ… **çŠ¶æ€ç›‘æ§** - å®æ—¶æ˜¾ç¤ºæœåŠ¡å¯åŠ¨çŠ¶æ€
- âœ… **é”™è¯¯å¤„ç†** - å¯åŠ¨å¤±è´¥æ—¶è‡ªåŠ¨åœæ­¢å·²å¯åŠ¨çš„æœåŠ¡

### åœæ­¢è„šæœ¬åŠŸèƒ½
- âœ… **ä¼˜é›…åœæ­¢** - å…ˆå‘é€åœæ­¢ä¿¡å·ï¼Œç­‰å¾…è¿›ç¨‹è‡ªç„¶ç»“æŸ
- âœ… **å¼ºåˆ¶åœæ­¢** - è¶…æ—¶åå¼ºåˆ¶æ€æ­»è¿›ç¨‹
- âœ… **ç«¯å£æ¸…ç†** - æ¸…ç†è¢«å ç”¨çš„ç«¯å£
- âœ… **è¿›ç¨‹æŸ¥æ‰¾** - é€šè¿‡PIDæ–‡ä»¶å’Œç«¯å£æŸ¥æ‰¾è¿›ç¨‹
- âœ… **çŠ¶æ€æ£€æŸ¥** - æ˜¾ç¤ºæœåŠ¡åœæ­¢çŠ¶æ€
- âœ… **æ–‡ä»¶æ¸…ç†** - æ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶

## ğŸ“Š æœåŠ¡ç«¯å£é…ç½®

| æœåŠ¡åç§° | ç«¯å£ | å¥åº·æ£€æŸ¥ç«¯ç‚¹ | è¯´æ˜ |
|---------|------|-------------|------|
| Registry | 8761 | `/actuator/health` | æœåŠ¡æ³¨å†Œä¸­å¿ƒ |
| User | 8081 | `/actuator/health` | ç”¨æˆ·ç®¡ç†æœåŠ¡ |
| Auth | 8082 | `/actuator/health` | è®¤è¯æˆæƒæœåŠ¡ |
| Workflow | 8083 | `/actuator/health` | å·¥ä½œæµå¼•æ“æœåŠ¡ |
| Monitoring | 8085 | `/actuator/health` | ç›‘æ§æœåŠ¡ |
| Gateway | 8080 | `/actuator/health` | APIç½‘å…³æœåŠ¡ |

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **Java**: JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Maven**: 3.6.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows

### ç½‘ç»œè¦æ±‚
- ç¡®ä¿æ‰€æœ‰æœåŠ¡ç«¯å£æœªè¢«å ç”¨
- ç¡®ä¿å¯ä»¥è®¿é—®æœ¬åœ°æœåŠ¡

### ä¾èµ–æœåŠ¡
- **MySQL**: æ•°æ®åº“æœåŠ¡ (ç«¯å£ 3306)
- **Redis**: ç¼“å­˜æœåŠ¡ (ç«¯å£ 6379)
- **Nacos**: æœåŠ¡æ³¨å†Œä¸­å¿ƒ (ç«¯å£ 8848) - å¯é€‰

## ğŸ“ æ—¥å¿—æ–‡ä»¶

### æ—¥å¿—ç›®å½•ç»“æ„
```
logs/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ registry.log
â”‚   â”œâ”€â”€ user.log
â”‚   â”œâ”€â”€ auth.log
â”‚   â”œâ”€â”€ workflow.log
â”‚   â”œâ”€â”€ monitoring.log
â”‚   â”œâ”€â”€ gateway.log
â”‚   â”œâ”€â”€ registry.pid
â”‚   â”œâ”€â”€ user.pid
â”‚   â”œâ”€â”€ auth.pid
â”‚   â”œâ”€â”€ workflow.pid
â”‚   â”œâ”€â”€ monitoring.pid
â”‚   â””â”€â”€ gateway.pid
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# Linux/macOS
tail -f logs/services/user.log

# Windows
type logs\services\user.log
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯åŠ¨é¡ºåºå¾ˆé‡è¦** - ä¸è¦æ‰‹åŠ¨æ”¹å˜æœåŠ¡å¯åŠ¨é¡ºåº
2. **ç«¯å£å†²çª** - ç¡®ä¿æ‰€æœ‰æœåŠ¡ç«¯å£æœªè¢«å ç”¨
3. **èµ„æºè¦æ±‚** - æ‰€æœ‰æœåŠ¡åŒæ—¶è¿è¡Œéœ€è¦è¶³å¤Ÿçš„å†…å­˜
4. **ç½‘ç»œè¿æ¥** - ç¡®ä¿æœåŠ¡é—´å¯ä»¥æ­£å¸¸é€šä¿¡
5. **æ•°æ®åº“è¿æ¥** - ç¡®ä¿MySQLå’ŒRedisæœåŠ¡å·²å¯åŠ¨

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥æ—¥å¿—
./start-backend.sh logs <æœåŠ¡å>

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :8081

# å¼ºåˆ¶åœæ­¢æ‰€æœ‰æœåŠ¡
./stop-backend.sh force
```

#### 2. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8081

# å¼ºåˆ¶åœæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 3. ç¼–è¯‘å¤±è´¥
```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
cd /Users/steven/Project/FlowMaster/flowmaster-backend
mvn clean compile
```

#### 4. æœåŠ¡æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8081/actuator/health

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
sudo ufw status
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœåŠ¡æ—¥å¿—æ–‡ä»¶
2. æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
3. ç¡®è®¤æ‰€æœ‰ä¾èµ–æœåŠ¡å·²å¯åŠ¨
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ

---

**FlowMaster Team** - è®©å·¥ä½œæµç®¡ç†æ›´ç®€å•ï¼
